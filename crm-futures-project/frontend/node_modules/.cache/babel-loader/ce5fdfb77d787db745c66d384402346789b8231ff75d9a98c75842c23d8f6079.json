{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import{useTranslation}from'react-i18next';import{ThemeContext}from'../contexts/ThemeContext';import{LanguageContext}from'../contexts/LanguageContext';import{getSettings,updateSettings}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Settings(){const{t}=useTranslation();const{theme,changeTheme}=useContext(ThemeContext);const{language,changeLanguage:changeAppLanguage}=useContext(LanguageContext);const[selectedLanguage,setSelectedLanguage]=useState(language);const[selectedTheme,setSelectedTheme]=useState(theme);const[message,setMessage]=useState('');const[isLoading,setIsLoading]=useState(false);useEffect(()=>{setSelectedLanguage(language);},[language]);useEffect(()=>{setSelectedTheme(theme);},[theme]);const handleSave=async event=>{event.preventDefault();setIsLoading(true);setMessage('');try{const response=await updateSettings({language:selectedLanguage,theme:selectedTheme});changeAppLanguage(response.data.language);changeTheme(response.data.theme);setMessage(t('settings.success'));}catch(error){console.error(\"Error saving settings:\",error);setMessage(t('settings.error'));}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:t('settings.title')}),message&&/*#__PURE__*/_jsx(\"p\",{children:message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSave,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"languageSelect\",children:[t('settings.language'),\": \"]}),/*#__PURE__*/_jsxs(\"select\",{id:\"languageSelect\",value:selectedLanguage,onChange:e=>setSelectedLanguage(e.target.value),disabled:isLoading,children:[/*#__PURE__*/_jsx(\"option\",{value:\"en\",children:\"English\"}),/*#__PURE__*/_jsx(\"option\",{value:\"de\",children:\"Deutsch\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ru\",children:\"\\u0420\\u0443\\u0441\\u0441\\u043A\\u0438\\u0439\"})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[t('settings.theme'),\": \"]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"theme\",value:\"light\",checked:selectedTheme==='light',onChange:e=>setSelectedTheme(e.target.value),disabled:isLoading}),\" \",t('settings.light')]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"theme\",value:\"dark\",checked:selectedTheme==='dark',onChange:e=>setSelectedTheme(e.target.value),disabled:isLoading}),\" \",t('settings.dark')]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,children:isLoading?'Saving...':t('settings.save')})]})]});}export default Settings;","map":{"version":3,"names":["React","useState","useEffect","useContext","useTranslation","ThemeContext","LanguageContext","getSettings","updateSettings","jsx","_jsx","jsxs","_jsxs","Settings","t","theme","changeTheme","language","changeLanguage","changeAppLanguage","selectedLanguage","setSelectedLanguage","selectedTheme","setSelectedTheme","message","setMessage","isLoading","setIsLoading","handleSave","event","preventDefault","response","data","error","console","children","onSubmit","htmlFor","id","value","onChange","e","target","disabled","type","name","checked"],"sources":["D:/__work/_______final/new_proj_CRM/test/crm-futures-project/frontend/src/components/Settings.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { ThemeContext } from '../contexts/ThemeContext';\nimport { LanguageContext } from '../contexts/LanguageContext';\nimport { getSettings, updateSettings } from '../services/api';\n\nfunction Settings() {\n  const { t } = useTranslation();\n  const { theme, changeTheme } = useContext(ThemeContext);\n  const { language, changeLanguage: changeAppLanguage } = useContext(LanguageContext);\n\n  const [selectedLanguage, setSelectedLanguage] = useState(language);\n  const [selectedTheme, setSelectedTheme] = useState(theme);\n  const [message, setMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    setSelectedLanguage(language);\n  }, [language]);\n\n  useEffect(() => {\n    setSelectedTheme(theme);\n  }, [theme]);\n\n  const handleSave = async (event) => {\n    event.preventDefault();\n    setIsLoading(true);\n    setMessage('');\n    try {\n      const response = await updateSettings({\n        language: selectedLanguage,\n        theme: selectedTheme,\n      });\n      changeAppLanguage(response.data.language);\n      changeTheme(response.data.theme);\n      setMessage(t('settings.success'));\n    } catch (error) {\n      console.error(\"Error saving settings:\", error);\n      setMessage(t('settings.error'));\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div>\n      <h2>{t('settings.title')}</h2>\n      {message && <p>{message}</p>}\n      <form onSubmit={handleSave}>\n        <div>\n          <label htmlFor=\"languageSelect\">{t('settings.language')}: </label>\n          <select\n            id=\"languageSelect\"\n            value={selectedLanguage}\n            onChange={(e) => setSelectedLanguage(e.target.value)}\n            disabled={isLoading}\n          >\n            <option value=\"en\">English</option>\n            <option value=\"de\">Deutsch</option>\n            <option value=\"ru\">Русский</option>\n          </select>\n        </div>\n        <br />\n        <div>\n          <label>{t('settings.theme')}: </label>\n          <label>\n            <input\n              type=\"radio\"\n              name=\"theme\"\n              value=\"light\"\n              checked={selectedTheme === 'light'}\n              onChange={(e) => setSelectedTheme(e.target.value)}\n              disabled={isLoading}\n            /> {t('settings.light')}\n          </label>\n          <label>\n            <input\n              type=\"radio\"\n              name=\"theme\"\n              value=\"dark\"\n              checked={selectedTheme === 'dark'}\n              onChange={(e) => setSelectedTheme(e.target.value)}\n              disabled={isLoading}\n            /> {t('settings.dark')}\n          </label>\n        </div>\n        <br />\n        <button type=\"submit\" disabled={isLoading}>\n          {isLoading ? 'Saving...' : t('settings.save')}\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default Settings;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}